<?php

require_once 'includes/nd_genotypes.admin.inc';

// Mviews
require_once 'includes/mviews/nd_genotype_experiment.inc';
require_once 'includes/mviews/nd_genotype_polymorphism.inc';
require_once 'includes/mviews/nd_genotype_experiment_summary.inc';

/**
 * Implements hook_views_api()
 *
 * Purpose: Essentially this hook tells drupal that there is views support for
 *  for this module which then includes kp_genotypes.views.inc where all the
 *  views integration code is
 *
 * @return
 *   An array with fields important for views integration
 *
 */
function nd_genotypes_views_api() {
  return array(
    'api' => 3,
    'path' => drupal_get_path('module', 'nd_genotypes') . '/includes/views',
  );
}

/**
 * Register any menu items for this module
 */
function nd_genotypes_menu () {
	$items = array();

	$items['admin/tripal/extension/nd_genotypes'] = array(
    'page callback' => 'nd_genotypes_admin_description',
    'title' => 'Natural Diversity Genotypes',
    'description' => 'Provides an interface for genotypes and the experiments that generate them.',
    'access arguments' => array('administer tripal'),
    'page callback' => 'nd_genotypes_admin_launchpad'
  );

  $items['admin/tripal/extension/nd_genotypes/configuration'] = array(
    'title' => 'Settings',
    'type' => MENU_LOCAL_TASK,
    'page callback' => 'drupal_get_form',
    'page arguments' => array('nd_genotypes_configuration_form'),
    'access arguments' => array('administer tripal'),
  );

   $items['admin/tripal/extension/nd_genotypes/mviews'] = array(
    'title' => 'Materialized Views',
    'type' => MENU_LOCAL_TASK,
    'page callback' => 'drupal_get_form',
    'page arguments' => array('nd_genotypes_mviews_update_form'),
    'access arguments' => array('administer tripal'),
  );

	return $items;
}

/**
 * Register any theme functions/templates for this module
 */
function nd_genotypes_theme() {
  return array();
  //return nd_genotypes_form_element_theme();
}